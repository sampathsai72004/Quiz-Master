{% extends "layout.html" %}

{% block title %}Register - Quiz Master{% endblock %}

{% block content %}
    <div class="register-container">
        <h3>Register</h3>
        <form id="registerForm" action="{{ url_for('routes.register') }}" method="POST">
       
            <label for="username">Username (E-mail):</label>
            <input type="email" id="username" name="username" class="input-field" placeholder="Enter your email" required>

            <label for="fullname">Full Name:</label>
            <input type="text" id="fullname" name="fullname" class="input-field" placeholder="Enter your full name" required>

   
            <label for="password">Password:</label>
            <div class="input-wrapper">
                <input type="password" id="password" name="password" class="input-field" placeholder="Enter your password" required>
                <span class="toggle-password" id="togglePassword">
                    <i class="fas fa-eye"></i>
                </span>
            </div>
            <small id="passwordError" class="error-text"></small>

       
            <label for="confirmPassword">Confirm Password:</label>
            <div class="input-wrapper">
                <input type="password" id="confirmPassword" name="confirm_password" class="input-field" placeholder="Re-enter your password" required>
                <span class="toggle-password" id="toggleConfirmPassword">
                    <i class="fas fa-eye"></i>
                </span>
            </div>
            <small id="confirmPasswordError" class="error-text"></small>

           
            <label for="qualification">Qualification:</label>
            <input type="text" id="qualification" name="qualification" class="input-field" placeholder="Enter your qualification" required>

            <label for="dob">Date of Birth:</label>
            <input type="date" id="dob" name="dob" class="input-field" required>
            <small id="dobError" class="error-text"></small>

            <button type="submit" class="btn">Register</button>
        </form>

        <div class="links">
            <a href="{{ url_for('routes.login', role='user') }}">Existing User?</a>
        </div>
    </div>

  
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const togglePassword = document.getElementById("togglePassword");
            const passwordField = document.getElementById("password");
            const toggleConfirmPassword = document.getElementById("toggleConfirmPassword");
            const confirmPasswordField = document.getElementById("confirmPassword");

    
            togglePassword.addEventListener("click", () => {
                passwordField.type = passwordField.type === "password" ? "text" : "password";
                togglePassword.innerHTML = passwordField.type === "password" ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });

            toggleConfirmPassword.addEventListener("click", () => {
                confirmPasswordField.type = confirmPasswordField.type === "password" ? "text" : "password";
                toggleConfirmPassword.innerHTML = confirmPasswordField.type === "password" ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });

            document.getElementById("registerForm").addEventListener("submit", function (e) {
                const username = document.getElementById("username").value.trim();
                const password = document.getElementById("password").value.trim();
                const confirmPassword = document.getElementById("confirmPassword").value.trim();
                const qualification = document.getElementById("qualification").value.trim();
                const dob = document.getElementById("dob").value.trim();

                let valid = true;

            
                if (!username || !password || !confirmPassword || !qualification || !dob) {
                    alert("Please fill in all fields.");
                    valid = false;
                }

             
                if (password.length < 6) {
                    document.getElementById("passwordError").innerText = "Password must be at least 6 characters!";
                    valid = false;
                } else {
                    document.getElementById("passwordError").innerText = "";
                }

                if (password !== confirmPassword) {
                    document.getElementById("confirmPasswordError").innerText = "Passwords do not match!";
                    valid = false;
                } else {
                    document.getElementById("confirmPasswordError").innerText = "";
                }

                if (!valid) {
                    e.preventDefault();
                }
            });
        });
    </script>
{% endblock %}